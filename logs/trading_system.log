2025-08-25 20:39:25 | INFO     | __main__:__init__:83 - PPO Trading System initialized
2025-08-25 20:39:25 | INFO     | __main__:initialize:118 - Initializing PPO Trading System...
2025-08-25 20:39:29 | INFO     | backend.data_manager:_connect_postgres:93 - Connected to PostgreSQL database
2025-08-25 20:39:31 | INFO     | backend.data_manager:_connect_redis:116 - Connected to Redis cache
2025-08-25 20:39:34 | INFO     | backend.data_manager:_create_tables:247 - Database tables created/verified successfully
2025-08-25 20:39:34 | INFO     | backend.data_manager:initialize:72 - Data manager initialization completed
2025-08-25 20:39:35 | INFO     | services.websocket_server:initialize:108 - Redis connection established
2025-08-25 20:39:35 | INFO     | models.ppo_agent:__init__:144 - PPO Trading Agent initialized
2025-08-25 20:39:35 | INFO     | services.mt5_client:__init__:113 - MT5 Client initialized
2025-08-25 20:39:35 | INFO     | models.ppo_agent:__init__:144 - PPO Trading Agent initialized
2025-08-25 20:39:35 | INFO     | envs.state_features:__init__:41 - State feature extractor initialized
2025-08-25 20:39:35 | INFO     | services.signal_generator:__init__:110 - Signal generator initialized
2025-08-25 20:39:35 | INFO     | models.ppo_agent:__init__:144 - PPO Trading Agent initialized
2025-08-25 20:39:35 | INFO     | envs.state_features:__init__:41 - State feature extractor initialized
2025-08-25 20:39:35 | INFO     | services.signal_generator:__init__:110 - Signal generator initialized
2025-08-25 20:39:35 | INFO     | __main__:initialize:151 - System initialization completed successfully
2025-08-25 20:39:35 | INFO     | __main__:start_websocket_server:418 - WebSocket server started
2025-08-25 20:39:35 | INFO     | __main__:run_training:215 - Starting training for XAUUSDm
2025-08-25 20:39:36 | WARNING  | backend.data_manager:get_historical_data:538 - No cached data found for XAUUSDm:H1
2025-08-25 20:39:36 | INFO     | services.mt5_client:connect:150 - Connected to MT5: Account 210888620, Balance: 99.6, Server: Exness-MT5Trial9
2025-08-25 20:39:36 | INFO     | services.mt5_client:get_historical_data:231 - Retrieved 11783 bars for XAUUSDm (H1)
2025-08-25 20:39:37 | INFO     | services.websocket_server:initialize:108 - Redis connection established
2025-08-25 20:39:37 | INFO     | services.websocket_server:start_server:438 - WebSocket server started on 0.0.0.0:8080
2025-08-25 20:39:40 | INFO     | backend.data_manager:save_historical_data:500 - Cached historical data for XAUUSDm (11783 rows)
2025-08-25 20:39:40 | INFO     | __main__:_get_or_download_data:464 - Downloaded and cached data for XAUUSDm: 11783 samples
2025-08-25 20:39:40 | INFO     | __main__:run_training:235 - Training data prepared: 11783 samples
2025-08-25 20:39:40 | INFO     | envs.state_features:__init__:41 - State feature extractor initialized
2025-08-25 20:39:40 | INFO     | envs.reward_functions:__init__:43 - Reward calculator initialized with type: profit_based
2025-08-25 20:39:40 | INFO     | envs.state_features:extract_features:53 - Extracting features from market data
2025-08-25 20:39:40 | INFO     | envs.state_features:_normalize_features:260 - Feature normalization parameters fitted for 28 features
2025-08-25 20:39:40 | INFO     | envs.state_features:_select_features:292 - Selected 28 features: ['open', 'high', 'low', 'close', 'volume', 'sma_5', 'sma_20', 'sma_50', 'ema_12', 'ema_26', 'rsi_14', 'macd', 'macd_signal', 'bb_upper', 'bb_lower', 'atr_14', 'hour_of_day', 'day_of_week', 'is_weekend', 'hour_sin', 'hour_cos', 'dow_sin', 'dow_cos', 'price_change', 'high_low_ratio', 'volume_ratio', 'volatility', 'price_position']
2025-08-25 20:39:40 | INFO     | envs.state_features:extract_features:69 - Feature extraction complete. Shape: (9426, 28)
2025-08-25 20:39:40 | INFO     | envs.trading_env:_prepare_data:198 - Data prepared: 9377 samples, 28 features
2025-08-25 20:39:40 | INFO     | envs.trading_env:_setup_spaces:226 - Action space: Discrete(3)
2025-08-25 20:39:40 | INFO     | envs.trading_env:_setup_spaces:227 - Observation space: (2805,)
2025-08-25 20:39:40 | INFO     | envs.trading_env:__init__:144 - Trading environment initialized with 9426 data points
2025-08-25 20:39:40 | INFO     | models.ppo_agent:create_model:313 - Creating new PPO model
2025-08-25 20:39:45 | INFO     | models.ppo_agent:create_model:351 - PPO model created successfully
2025-08-25 20:39:45 | INFO     | models.ppo_agent:train:357 - Starting PPO training with 9426 samples
2025-08-25 20:39:45 | INFO     | envs.state_features:__init__:41 - State feature extractor initialized
2025-08-25 20:39:45 | INFO     | envs.reward_functions:__init__:43 - Reward calculator initialized with type: profit_based
2025-08-25 20:39:45 | INFO     | envs.state_features:extract_features:53 - Extracting features from market data
2025-08-25 20:39:45 | INFO     | envs.state_features:_normalize_features:260 - Feature normalization parameters fitted for 28 features
2025-08-25 20:39:45 | INFO     | envs.state_features:_select_features:292 - Selected 28 features: ['open', 'high', 'low', 'close', 'volume', 'sma_5', 'sma_20', 'sma_50', 'ema_12', 'ema_26', 'rsi_14', 'macd', 'macd_signal', 'bb_upper', 'bb_lower', 'atr_14', 'hour_of_day', 'day_of_week', 'is_weekend', 'hour_sin', 'hour_cos', 'dow_sin', 'dow_cos', 'price_change', 'high_low_ratio', 'volume_ratio', 'volatility', 'price_position']
2025-08-25 20:39:45 | INFO     | envs.state_features:extract_features:69 - Feature extraction complete. Shape: (2357, 28)
2025-08-25 20:39:45 | INFO     | envs.trading_env:_prepare_data:198 - Data prepared: 2308 samples, 28 features
2025-08-25 20:39:45 | INFO     | envs.trading_env:_setup_spaces:226 - Action space: Discrete(3)
2025-08-25 20:39:45 | INFO     | envs.trading_env:_setup_spaces:227 - Observation space: (2805,)
2025-08-25 20:39:45 | INFO     | envs.trading_env:__init__:144 - Trading environment initialized with 2357 data points
2025-08-25 20:40:05 | INFO     | models.ppo_agent:_on_rollout_end:101 - New best model saved with portfolio value: 8721344920.95
2025-08-25 20:42:12 | INFO     | models.ppo_agent:_on_rollout_end:101 - New best model saved with portfolio value: 243505301110.67
2025-08-25 20:46:16 | INFO     | models.ppo_agent:_on_rollout_end:101 - New best model saved with portfolio value: 11261584644236.45
2025-08-25 20:46:31 | INFO     | models.ppo_agent:train:395 - Saved VecNormalize stats to ./models/saved_models\vecnormalize.pkl
2025-08-25 20:46:31 | INFO     | models.ppo_agent:train:417 - Training completed. Model saved to ./models/saved_models/ppo_final_f52f4edc-5b46-46d7-83cd-a12b3f21ab1c.zip
2025-08-25 20:46:31 | ERROR    | backend.data_manager:save_training_session:300 - Error saving training session: connection was closed in the middle of operation
2025-08-25 20:46:31 | INFO     | __main__:run_training:277 - Training completed for XAUUSDm: {'success': True, 'model_path': './models/saved_models/ppo_final_f52f4edc-5b46-46d7-83cd-a12b3f21ab1c.zip', 'total_timesteps': 10000, 'best_model_path': 'C:\\Users\\ikchr\\AppData\\Local\\Temp\\SB3-2025-08-25-20-39-45-325696\\best_model', 'final_performance': {'mean_reward': np.float64(11261584644236.45), 'total_episodes': 0}}
2025-08-25 20:46:31 | INFO     | __main__:shutdown:485 - Shutting down PPO Trading System...
2025-08-25 20:46:31 | INFO     | services.mt5_client:stop_streaming:312 - Stopped market data streaming
2025-08-25 20:46:31 | INFO     | services.mt5_client:disconnect:166 - Disconnected from MT5
2025-08-25 20:46:31 | INFO     | backend.data_manager:close:265 - Database connections closed
2025-08-25 20:46:31 | INFO     | __main__:shutdown:502 - System shutdown completed
2025-08-25 20:47:30 | INFO     | __main__:__init__:83 - PPO Trading System initialized
2025-08-25 20:47:30 | INFO     | __main__:initialize:118 - Initializing PPO Trading System...
2025-08-25 20:47:33 | INFO     | backend.data_manager:_connect_postgres:93 - Connected to PostgreSQL database
2025-08-25 20:47:36 | INFO     | backend.data_manager:_connect_redis:116 - Connected to Redis cache
2025-08-25 20:47:39 | INFO     | backend.data_manager:_create_tables:247 - Database tables created/verified successfully
2025-08-25 20:47:39 | INFO     | backend.data_manager:initialize:72 - Data manager initialization completed
2025-08-25 20:47:40 | INFO     | services.websocket_server:initialize:108 - Redis connection established
2025-08-25 20:47:41 | INFO     | models.ppo_agent:__init__:144 - PPO Trading Agent initialized
2025-08-25 20:47:41 | INFO     | services.mt5_client:__init__:113 - MT5 Client initialized
2025-08-25 20:47:41 | INFO     | models.ppo_agent:__init__:144 - PPO Trading Agent initialized
2025-08-25 20:47:41 | INFO     | envs.state_features:__init__:41 - State feature extractor initialized
2025-08-25 20:47:41 | INFO     | services.signal_generator:__init__:110 - Signal generator initialized
2025-08-25 20:47:41 | INFO     | models.ppo_agent:__init__:144 - PPO Trading Agent initialized
2025-08-25 20:47:41 | INFO     | envs.state_features:__init__:41 - State feature extractor initialized
2025-08-25 20:47:41 | INFO     | services.signal_generator:__init__:110 - Signal generator initialized
2025-08-25 20:47:41 | INFO     | __main__:initialize:151 - System initialization completed successfully
2025-08-25 20:47:41 | INFO     | __main__:start_websocket_server:418 - WebSocket server started
2025-08-25 20:47:41 | ERROR    | __main__:run:572 - Error in main run loop: Model path required for backtesting
2025-08-25 20:47:41 | INFO     | __main__:shutdown:485 - Shutting down PPO Trading System...
2025-08-25 20:47:41 | INFO     | services.mt5_client:stop_streaming:312 - Stopped market data streaming
2025-08-25 20:47:41 | INFO     | services.mt5_client:disconnect:166 - Disconnected from MT5
2025-08-25 20:47:41 | INFO     | backend.data_manager:close:265 - Database connections closed
2025-08-25 20:47:41 | INFO     | __main__:shutdown:502 - System shutdown completed
2025-08-25 20:54:33 | INFO     | __main__:__init__:83 - PPO Trading System initialized
2025-08-25 20:54:33 | INFO     | __main__:initialize:118 - Initializing PPO Trading System...
2025-08-25 20:54:36 | INFO     | backend.data_manager:_connect_postgres:93 - Connected to PostgreSQL database
2025-08-25 20:54:37 | INFO     | backend.data_manager:_connect_redis:116 - Connected to Redis cache
2025-08-25 20:54:40 | INFO     | backend.data_manager:_create_tables:247 - Database tables created/verified successfully
2025-08-25 20:54:40 | INFO     | backend.data_manager:initialize:72 - Data manager initialization completed
2025-08-25 20:54:42 | INFO     | services.websocket_server:initialize:108 - Redis connection established
2025-08-25 20:54:42 | INFO     | models.ppo_agent:__init__:144 - PPO Trading Agent initialized
2025-08-25 20:54:42 | INFO     | services.mt5_client:__init__:113 - MT5 Client initialized
2025-08-25 20:54:42 | INFO     | models.ppo_agent:__init__:144 - PPO Trading Agent initialized
2025-08-25 20:54:42 | INFO     | envs.state_features:__init__:41 - State feature extractor initialized
2025-08-25 20:54:42 | INFO     | services.signal_generator:__init__:110 - Signal generator initialized
2025-08-25 20:54:42 | INFO     | models.ppo_agent:__init__:144 - PPO Trading Agent initialized
2025-08-25 20:54:42 | INFO     | envs.state_features:__init__:41 - State feature extractor initialized
2025-08-25 20:54:42 | INFO     | services.signal_generator:__init__:110 - Signal generator initialized
2025-08-25 20:54:42 | INFO     | __main__:initialize:151 - System initialization completed successfully
2025-08-25 20:54:42 | INFO     | __main__:start_websocket_server:418 - WebSocket server started
2025-08-25 20:54:42 | INFO     | __main__:run_backtest:311 - Starting backtest for XAUUSDm with model models/saved_models/ppo_final_f52f4edc-5b46-46d7-83cd-a12b3f21ab1c.zip
2025-08-25 20:54:50 | INFO     | services.websocket_server:initialize:108 - Redis connection established
2025-08-25 20:54:50 | INFO     | services.websocket_server:start_server:438 - WebSocket server started on 0.0.0.0:8080
2025-08-25 20:55:00 | INFO     | backend.data_manager:get_historical_data:530 - Retrieved 11783 rows from cache for XAUUSDm
2025-08-25 20:55:00 | INFO     | __main__:_get_or_download_data:445 - Using cached data for XAUUSDm: 11783 samples
2025-08-25 20:55:00 | INFO     | envs.state_features:__init__:41 - State feature extractor initialized
2025-08-25 20:55:00 | INFO     | envs.reward_functions:__init__:43 - Reward calculator initialized with type: profit_based
2025-08-25 20:55:00 | INFO     | envs.state_features:extract_features:53 - Extracting features from market data
2025-08-25 20:55:01 | WARNING  | envs.state_features:_add_time_features:203 - No timestamp column found, using integer index
2025-08-25 20:55:01 | INFO     | envs.state_features:_normalize_features:260 - Feature normalization parameters fitted for 26 features
2025-08-25 20:55:01 | INFO     | envs.state_features:_select_features:292 - Selected 21 features: ['open', 'high', 'low', 'close', 'volume', 'sma_5', 'sma_20', 'sma_50', 'ema_12', 'ema_26', 'rsi_14', 'macd', 'macd_signal', 'bb_upper', 'bb_lower', 'atr_14', 'price_change', 'high_low_ratio', 'volume_ratio', 'volatility', 'price_position']
2025-08-25 20:55:01 | INFO     | envs.state_features:extract_features:69 - Feature extraction complete. Shape: (11783, 21)
2025-08-25 20:55:01 | ERROR    | __main__:run_backtest:347 - Backtest failed: Processed data missing features required by obs_config.yaml: ['hour_of_day', 'day_of_week', 'is_weekend', 'hour_sin', 'hour_cos', 'dow_sin', 'dow_cos']
2025-08-25 20:55:01 | INFO     | __main__:shutdown:485 - Shutting down PPO Trading System...
2025-08-25 20:55:01 | INFO     | services.mt5_client:stop_streaming:312 - Stopped market data streaming
2025-08-25 20:55:01 | INFO     | services.mt5_client:disconnect:166 - Disconnected from MT5
2025-08-25 20:55:01 | INFO     | backend.data_manager:close:265 - Database connections closed
2025-08-25 20:55:01 | INFO     | __main__:shutdown:502 - System shutdown completed
2025-08-25 22:16:41 | INFO     | __main__:__init__:83 - PPO Trading System initialized
2025-08-25 22:16:41 | INFO     | __main__:initialize:118 - Initializing PPO Trading System...
2025-08-25 22:16:44 | INFO     | backend.data_manager:_connect_postgres:93 - Connected to PostgreSQL database
2025-08-25 22:16:45 | INFO     | backend.data_manager:_connect_redis:116 - Connected to Redis cache
2025-08-25 22:16:48 | INFO     | backend.data_manager:_create_tables:247 - Database tables created/verified successfully
2025-08-25 22:16:48 | INFO     | backend.data_manager:initialize:72 - Data manager initialization completed
2025-08-25 22:16:50 | INFO     | services.websocket_server:initialize:108 - Redis connection established
2025-08-25 22:16:50 | INFO     | models.ppo_agent:__init__:144 - PPO Trading Agent initialized
2025-08-25 22:16:50 | INFO     | services.mt5_client:__init__:113 - MT5 Client initialized
2025-08-25 22:16:50 | INFO     | models.ppo_agent:__init__:144 - PPO Trading Agent initialized
2025-08-25 22:16:50 | INFO     | envs.state_features:__init__:41 - State feature extractor initialized
2025-08-25 22:16:50 | INFO     | services.signal_generator:__init__:110 - Signal generator initialized
2025-08-25 22:16:50 | INFO     | models.ppo_agent:__init__:144 - PPO Trading Agent initialized
2025-08-25 22:16:50 | INFO     | envs.state_features:__init__:41 - State feature extractor initialized
2025-08-25 22:16:50 | INFO     | services.signal_generator:__init__:110 - Signal generator initialized
2025-08-25 22:16:50 | INFO     | __main__:initialize:151 - System initialization completed successfully
2025-08-25 22:16:50 | INFO     | __main__:start_websocket_server:418 - WebSocket server started
2025-08-25 22:16:50 | INFO     | __main__:run_backtest:311 - Starting backtest for XAUUSDm with model models/saved_models/ppo_final_f52f4edc-5b46-46d7-83cd-a12b3f21ab1c.zip
2025-08-25 22:16:50 | WARNING  | backend.data_manager:get_historical_data:538 - No cached data found for XAUUSDm:H1
2025-08-25 22:16:50 | INFO     | services.mt5_client:connect:150 - Connected to MT5: Account 210888620, Balance: 99.6, Server: Exness-MT5Trial9
2025-08-25 22:16:50 | INFO     | services.mt5_client:get_historical_data:231 - Retrieved 2912 bars for XAUUSDm (H1)
2025-08-25 22:16:52 | INFO     | services.websocket_server:initialize:108 - Redis connection established
2025-08-25 22:16:52 | INFO     | services.websocket_server:start_server:438 - WebSocket server started on 0.0.0.0:8080
2025-08-25 22:16:52 | INFO     | backend.data_manager:save_historical_data:500 - Cached historical data for XAUUSDm (2912 rows)
2025-08-25 22:16:52 | INFO     | __main__:_get_or_download_data:464 - Downloaded and cached data for XAUUSDm: 2912 samples
2025-08-25 22:16:52 | INFO     | envs.state_features:__init__:41 - State feature extractor initialized
2025-08-25 22:16:52 | INFO     | envs.reward_functions:__init__:43 - Reward calculator initialized with type: profit_based
2025-08-25 22:16:52 | INFO     | envs.state_features:extract_features:53 - Extracting features from market data
2025-08-25 22:16:52 | INFO     | envs.state_features:_normalize_features:277 - Feature normalization parameters fitted for 28 features
2025-08-25 22:16:52 | INFO     | envs.state_features:_select_features:309 - Selected 28 features: ['open', 'high', 'low', 'close', 'volume', 'sma_5', 'sma_20', 'sma_50', 'ema_12', 'ema_26', 'rsi_14', 'macd', 'macd_signal', 'bb_upper', 'bb_lower', 'atr_14', 'hour_of_day', 'day_of_week', 'is_weekend', 'hour_sin', 'hour_cos', 'dow_sin', 'dow_cos', 'price_change', 'high_low_ratio', 'volume_ratio', 'volatility', 'price_position']
2025-08-25 22:16:52 | INFO     | envs.state_features:extract_features:69 - Feature extraction complete. Shape: (2912, 28)
2025-08-25 22:16:52 | INFO     | envs.trading_env:_prepare_data:203 - Data prepared: 2863 samples, 28 features
2025-08-25 22:16:52 | INFO     | envs.trading_env:_setup_spaces:231 - Action space: Discrete(3)
2025-08-25 22:16:52 | INFO     | envs.trading_env:_setup_spaces:232 - Observation space: (2805,)
2025-08-25 22:16:52 | INFO     | envs.trading_env:__init__:144 - Trading environment initialized with 2912 data points
2025-08-25 22:16:52 | INFO     | models.ppo_agent:load_model:554 - Loaded VecNormalize stats from models/saved_models\vecnormalize.pkl
2025-08-25 22:16:57 | INFO     | models.ppo_agent:load_model:565 - Model loaded from models/saved_models/ppo_final_f52f4edc-5b46-46d7-83cd-a12b3f21ab1c.zip
2025-08-25 22:16:57 | ERROR    | __main__:run_backtest:347 - Backtest failed: Failed to load model from models/saved_models/ppo_final_f52f4edc-5b46-46d7-83cd-a12b3f21ab1c.zip
2025-08-25 22:16:57 | INFO     | __main__:shutdown:485 - Shutting down PPO Trading System...
2025-08-25 22:16:57 | INFO     | services.mt5_client:stop_streaming:312 - Stopped market data streaming
2025-08-25 22:16:57 | INFO     | services.mt5_client:disconnect:166 - Disconnected from MT5
2025-08-25 22:16:57 | INFO     | backend.data_manager:close:265 - Database connections closed
2025-08-25 22:16:57 | INFO     | __main__:shutdown:502 - System shutdown completed
2025-08-25 22:29:07 | INFO     | __main__:__init__:83 - PPO Trading System initialized
2025-08-25 22:29:07 | INFO     | __main__:initialize:118 - Initializing PPO Trading System...
2025-08-25 22:29:12 | INFO     | backend.data_manager:_connect_postgres:93 - Connected to PostgreSQL database
2025-08-25 22:29:16 | INFO     | backend.data_manager:_connect_redis:116 - Connected to Redis cache
2025-08-25 22:29:19 | INFO     | backend.data_manager:_create_tables:247 - Database tables created/verified successfully
2025-08-25 22:29:19 | INFO     | backend.data_manager:initialize:72 - Data manager initialization completed
2025-08-25 22:29:21 | INFO     | services.websocket_server:initialize:108 - Redis connection established
2025-08-25 22:29:21 | INFO     | models.ppo_agent:__init__:144 - PPO Trading Agent initialized
2025-08-25 22:29:21 | INFO     | services.mt5_client:__init__:113 - MT5 Client initialized
2025-08-25 22:29:21 | INFO     | models.ppo_agent:__init__:144 - PPO Trading Agent initialized
2025-08-25 22:29:21 | INFO     | envs.state_features:__init__:41 - State feature extractor initialized
2025-08-25 22:29:21 | INFO     | services.signal_generator:__init__:110 - Signal generator initialized
2025-08-25 22:29:21 | INFO     | models.ppo_agent:__init__:144 - PPO Trading Agent initialized
2025-08-25 22:29:21 | INFO     | envs.state_features:__init__:41 - State feature extractor initialized
2025-08-25 22:29:21 | INFO     | services.signal_generator:__init__:110 - Signal generator initialized
2025-08-25 22:29:21 | INFO     | __main__:initialize:151 - System initialization completed successfully
2025-08-25 22:29:21 | INFO     | __main__:start_websocket_server:418 - WebSocket server started
2025-08-25 22:29:21 | INFO     | __main__:run_backtest:311 - Starting backtest for XAUUSDm with model models/saved_models/ppo_final_f52f4edc-5b46-46d7-83cd-a12b3f21ab1c.zip
2025-08-25 22:29:22 | INFO     | backend.data_manager:get_historical_data:530 - Retrieved 2912 rows from cache for XAUUSDm
2025-08-25 22:29:22 | INFO     | __main__:_get_or_download_data:445 - Using cached data for XAUUSDm: 2912 samples
2025-08-25 22:29:22 | INFO     | envs.state_features:__init__:41 - State feature extractor initialized
2025-08-25 22:29:22 | INFO     | envs.reward_functions:__init__:43 - Reward calculator initialized with type: profit_based
2025-08-25 22:29:22 | INFO     | envs.state_features:extract_features:53 - Extracting features from market data
2025-08-25 22:29:22 | INFO     | envs.state_features:_normalize_features:277 - Feature normalization parameters fitted for 28 features
2025-08-25 22:29:23 | INFO     | envs.state_features:_select_features:309 - Selected 28 features: ['open', 'high', 'low', 'close', 'volume', 'sma_5', 'sma_20', 'sma_50', 'ema_12', 'ema_26', 'rsi_14', 'macd', 'macd_signal', 'bb_upper', 'bb_lower', 'atr_14', 'hour_of_day', 'day_of_week', 'is_weekend', 'hour_sin', 'hour_cos', 'dow_sin', 'dow_cos', 'price_change', 'high_low_ratio', 'volume_ratio', 'volatility', 'price_position']
2025-08-25 22:29:23 | INFO     | envs.state_features:extract_features:69 - Feature extraction complete. Shape: (2912, 28)
2025-08-25 22:29:23 | INFO     | envs.trading_env:_prepare_data:203 - Data prepared: 2863 samples, 28 features
2025-08-25 22:29:23 | INFO     | envs.trading_env:_setup_spaces:231 - Action space: Discrete(3)
2025-08-25 22:29:23 | INFO     | envs.trading_env:_setup_spaces:232 - Observation space: (2805,)
2025-08-25 22:29:23 | INFO     | envs.trading_env:__init__:144 - Trading environment initialized with 2912 data points
2025-08-25 22:29:23 | INFO     | models.ppo_agent:load_model:554 - Loaded VecNormalize stats from models/saved_models\vecnormalize.pkl
2025-08-25 22:29:28 | INFO     | models.ppo_agent:load_model:565 - Model loaded from models/saved_models/ppo_final_f52f4edc-5b46-46d7-83cd-a12b3f21ab1c.zip
2025-08-25 22:29:28 | ERROR    | __main__:run_backtest:347 - Backtest failed: Failed to load model from models/saved_models/ppo_final_f52f4edc-5b46-46d7-83cd-a12b3f21ab1c.zip
2025-08-25 22:29:28 | INFO     | __main__:shutdown:485 - Shutting down PPO Trading System...
2025-08-25 22:29:28 | INFO     | services.mt5_client:stop_streaming:312 - Stopped market data streaming
2025-08-25 22:29:28 | INFO     | services.mt5_client:disconnect:166 - Disconnected from MT5
2025-08-25 22:29:28 | INFO     | services.websocket_server:initialize:108 - Redis connection established
2025-08-25 22:29:28 | INFO     | services.websocket_server:start_server:438 - WebSocket server started on 0.0.0.0:8080
2025-08-25 22:29:28 | INFO     | backend.data_manager:close:265 - Database connections closed
2025-08-25 22:29:28 | INFO     | __main__:shutdown:502 - System shutdown completed
2025-08-25 23:43:13 | INFO     | __main__:__init__:83 - PPO Trading System initialized
2025-08-25 23:43:13 | INFO     | __main__:initialize:118 - Initializing PPO Trading System...
2025-08-25 23:43:16 | INFO     | backend.data_manager:_connect_postgres:93 - Connected to PostgreSQL database
2025-08-25 23:43:18 | INFO     | backend.data_manager:_connect_redis:116 - Connected to Redis cache
2025-08-25 23:43:21 | INFO     | backend.data_manager:_create_tables:247 - Database tables created/verified successfully
2025-08-25 23:43:21 | INFO     | backend.data_manager:initialize:72 - Data manager initialization completed
2025-08-25 23:43:22 | INFO     | services.websocket_server:initialize:108 - Redis connection established
2025-08-25 23:43:22 | INFO     | models.ppo_agent:__init__:144 - PPO Trading Agent initialized
2025-08-25 23:43:22 | INFO     | services.mt5_client:__init__:113 - MT5 Client initialized
2025-08-25 23:43:22 | INFO     | models.ppo_agent:__init__:144 - PPO Trading Agent initialized
2025-08-25 23:43:22 | INFO     | envs.state_features:__init__:41 - State feature extractor initialized
2025-08-25 23:43:22 | INFO     | services.signal_generator:__init__:110 - Signal generator initialized
2025-08-25 23:43:22 | INFO     | models.ppo_agent:__init__:144 - PPO Trading Agent initialized
2025-08-25 23:43:22 | INFO     | envs.state_features:__init__:41 - State feature extractor initialized
2025-08-25 23:43:22 | INFO     | services.signal_generator:__init__:110 - Signal generator initialized
2025-08-25 23:43:22 | INFO     | __main__:initialize:151 - System initialization completed successfully
2025-08-25 23:43:22 | INFO     | __main__:start_websocket_server:418 - WebSocket server started
2025-08-25 23:43:22 | INFO     | __main__:run_backtest:311 - Starting backtest for XAUUSDm with model models/saved_models/ppo_final_f52f4edc-5b46-46d7-83cd-a12b3f21ab1c.zip
2025-08-25 23:43:22 | WARNING  | backend.data_manager:get_historical_data:538 - No cached data found for XAUUSDm:H1
2025-08-25 23:43:23 | INFO     | services.mt5_client:connect:150 - Connected to MT5: Account 210888620, Balance: 99.6, Server: Exness-MT5Trial9
2025-08-25 23:43:23 | INFO     | services.mt5_client:get_historical_data:231 - Retrieved 2912 bars for XAUUSDm (H1)
2025-08-25 23:43:23 | INFO     | services.websocket_server:initialize:108 - Redis connection established
2025-08-25 23:43:23 | INFO     | services.websocket_server:start_server:438 - WebSocket server started on 0.0.0.0:8080
2025-08-25 23:43:24 | INFO     | backend.data_manager:save_historical_data:500 - Cached historical data for XAUUSDm (2912 rows)
2025-08-25 23:43:24 | INFO     | __main__:_get_or_download_data:464 - Downloaded and cached data for XAUUSDm: 2912 samples
2025-08-25 23:43:24 | INFO     | envs.state_features:__init__:41 - State feature extractor initialized
2025-08-25 23:43:24 | INFO     | envs.reward_functions:__init__:43 - Reward calculator initialized with type: profit_based
2025-08-25 23:43:24 | INFO     | envs.state_features:extract_features:53 - Extracting features from market data
2025-08-25 23:43:24 | INFO     | envs.state_features:_normalize_features:279 - Feature normalization parameters fitted for 28 features
2025-08-25 23:43:24 | INFO     | envs.state_features:_select_features:311 - Selected 28 features: ['open', 'high', 'low', 'close', 'volume', 'sma_5', 'sma_20', 'sma_50', 'ema_12', 'ema_26', 'rsi_14', 'macd', 'macd_signal', 'bb_upper', 'bb_lower', 'atr_14', 'hour_of_day', 'day_of_week', 'is_weekend', 'hour_sin', 'hour_cos', 'dow_sin', 'dow_cos', 'price_change', 'high_low_ratio', 'volume_ratio', 'volatility', 'price_position']
2025-08-25 23:43:24 | INFO     | envs.state_features:extract_features:69 - Feature extraction complete. Shape: (2912, 28)
2025-08-25 23:43:25 | INFO     | envs.trading_env:_prepare_data:203 - Data prepared: 2863 samples, 28 features
2025-08-25 23:43:25 | INFO     | envs.trading_env:_setup_spaces:231 - Action space: Discrete(3)
2025-08-25 23:43:25 | INFO     | envs.trading_env:_setup_spaces:232 - Observation space: (2805,)
2025-08-25 23:43:25 | INFO     | envs.trading_env:__init__:144 - Trading environment initialized with 2912 data points
2025-08-25 23:43:25 | INFO     | models.ppo_agent:load_model:554 - Loaded VecNormalize stats from models/saved_models\vecnormalize.pkl
2025-08-25 23:43:29 | INFO     | models.ppo_agent:load_model:565 - Model loaded from models/saved_models/ppo_final_f52f4edc-5b46-46d7-83cd-a12b3f21ab1c.zip
2025-08-25 23:43:29 | ERROR    | __main__:run_backtest:347 - Backtest failed: Failed to load model from models/saved_models/ppo_final_f52f4edc-5b46-46d7-83cd-a12b3f21ab1c.zip
2025-08-25 23:43:29 | INFO     | __main__:shutdown:485 - Shutting down PPO Trading System...
2025-08-25 23:43:29 | INFO     | services.mt5_client:stop_streaming:312 - Stopped market data streaming
2025-08-25 23:43:29 | INFO     | services.mt5_client:disconnect:166 - Disconnected from MT5
2025-08-25 23:43:29 | INFO     | backend.data_manager:close:265 - Database connections closed
2025-08-25 23:43:29 | INFO     | __main__:shutdown:502 - System shutdown completed
2025-08-26 00:01:39 | INFO     | __main__:__init__:83 - PPO Trading System initialized
2025-08-26 00:01:39 | INFO     | __main__:initialize:118 - Initializing PPO Trading System...
2025-08-26 00:01:43 | INFO     | backend.data_manager:_connect_postgres:93 - Connected to PostgreSQL database
2025-08-26 00:01:44 | INFO     | backend.data_manager:_connect_redis:116 - Connected to Redis cache
2025-08-26 00:01:47 | INFO     | backend.data_manager:_create_tables:247 - Database tables created/verified successfully
2025-08-26 00:01:47 | INFO     | backend.data_manager:initialize:72 - Data manager initialization completed
2025-08-26 00:01:49 | INFO     | services.websocket_server:initialize:108 - Redis connection established
2025-08-26 00:01:49 | INFO     | models.ppo_agent:__init__:144 - PPO Trading Agent initialized
2025-08-26 00:01:49 | INFO     | services.mt5_client:__init__:113 - MT5 Client initialized
2025-08-26 00:01:49 | INFO     | models.ppo_agent:__init__:144 - PPO Trading Agent initialized
2025-08-26 00:01:49 | INFO     | envs.state_features:__init__:41 - State feature extractor initialized
2025-08-26 00:01:49 | INFO     | services.signal_generator:__init__:110 - Signal generator initialized
2025-08-26 00:01:49 | INFO     | models.ppo_agent:__init__:144 - PPO Trading Agent initialized
2025-08-26 00:01:49 | INFO     | envs.state_features:__init__:41 - State feature extractor initialized
2025-08-26 00:01:49 | INFO     | services.signal_generator:__init__:110 - Signal generator initialized
2025-08-26 00:01:49 | INFO     | __main__:initialize:151 - System initialization completed successfully
2025-08-26 00:01:49 | INFO     | __main__:start_websocket_server:418 - WebSocket server started
2025-08-26 00:01:49 | INFO     | __main__:run_backtest:311 - Starting backtest for XAUUSDm with model models/saved_models/ppo_final_f52f4edc-5b46-46d7-83cd-a12b3f21ab1c.zip
2025-08-26 00:01:51 | INFO     | services.websocket_server:initialize:108 - Redis connection established
2025-08-26 00:01:51 | INFO     | services.websocket_server:start_server:438 - WebSocket server started on 0.0.0.0:8080
2025-08-26 00:01:54 | INFO     | backend.data_manager:get_historical_data:530 - Retrieved 2912 rows from cache for XAUUSDm
2025-08-26 00:01:54 | INFO     | __main__:_get_or_download_data:445 - Using cached data for XAUUSDm: 2912 samples
2025-08-26 00:01:54 | INFO     | envs.state_features:__init__:41 - State feature extractor initialized
2025-08-26 00:01:54 | INFO     | envs.reward_functions:__init__:43 - Reward calculator initialized with type: profit_based
2025-08-26 00:01:54 | INFO     | envs.state_features:extract_features:53 - Extracting features from market data
2025-08-26 00:01:54 | INFO     | envs.state_features:_normalize_features:279 - Feature normalization parameters fitted for 28 features
2025-08-26 00:01:54 | INFO     | envs.state_features:_select_features:311 - Selected 28 features: ['open', 'high', 'low', 'close', 'volume', 'sma_5', 'sma_20', 'sma_50', 'ema_12', 'ema_26', 'rsi_14', 'macd', 'macd_signal', 'bb_upper', 'bb_lower', 'atr_14', 'hour_of_day', 'day_of_week', 'is_weekend', 'hour_sin', 'hour_cos', 'dow_sin', 'dow_cos', 'price_change', 'high_low_ratio', 'volume_ratio', 'volatility', 'price_position']
2025-08-26 00:01:54 | INFO     | envs.state_features:extract_features:69 - Feature extraction complete. Shape: (2912, 28)
2025-08-26 00:01:54 | INFO     | envs.trading_env:_prepare_data:203 - Data prepared: 2863 samples, 28 features
2025-08-26 00:01:54 | INFO     | envs.trading_env:_setup_spaces:231 - Action space: Discrete(3)
2025-08-26 00:01:54 | INFO     | envs.trading_env:_setup_spaces:232 - Observation space: (2805,)
2025-08-26 00:01:54 | INFO     | envs.trading_env:__init__:144 - Trading environment initialized with 2912 data points
2025-08-26 00:01:54 | INFO     | models.ppo_agent:load_model:554 - Loaded VecNormalize stats from models/saved_models\vecnormalize.pkl
2025-08-26 00:01:59 | INFO     | models.ppo_agent:load_model:565 - Model loaded from models/saved_models/ppo_final_f52f4edc-5b46-46d7-83cd-a12b3f21ab1c.zip
2025-08-26 00:01:59 | ERROR    | __main__:run_backtest:347 - Backtest failed: Failed to load model from models/saved_models/ppo_final_f52f4edc-5b46-46d7-83cd-a12b3f21ab1c.zip
2025-08-26 00:01:59 | INFO     | __main__:shutdown:485 - Shutting down PPO Trading System...
2025-08-26 00:01:59 | INFO     | services.mt5_client:stop_streaming:312 - Stopped market data streaming
2025-08-26 00:01:59 | INFO     | services.mt5_client:disconnect:166 - Disconnected from MT5
2025-08-26 00:01:59 | INFO     | backend.data_manager:close:265 - Database connections closed
2025-08-26 00:01:59 | INFO     | __main__:shutdown:502 - System shutdown completed
2025-08-26 00:03:10 | INFO     | __main__:__init__:83 - PPO Trading System initialized
2025-08-26 00:03:10 | INFO     | __main__:initialize:118 - Initializing PPO Trading System...
2025-08-26 00:03:12 | INFO     | backend.data_manager:_connect_postgres:93 - Connected to PostgreSQL database
2025-08-26 00:03:13 | INFO     | backend.data_manager:_connect_redis:116 - Connected to Redis cache
2025-08-26 00:03:16 | INFO     | backend.data_manager:_create_tables:247 - Database tables created/verified successfully
2025-08-26 00:03:16 | INFO     | backend.data_manager:initialize:72 - Data manager initialization completed
2025-08-26 00:03:18 | INFO     | services.websocket_server:initialize:108 - Redis connection established
2025-08-26 00:03:18 | INFO     | models.ppo_agent:__init__:144 - PPO Trading Agent initialized
2025-08-26 00:03:18 | INFO     | services.mt5_client:__init__:113 - MT5 Client initialized
2025-08-26 00:03:18 | INFO     | models.ppo_agent:__init__:144 - PPO Trading Agent initialized
2025-08-26 00:03:18 | INFO     | envs.state_features:__init__:41 - State feature extractor initialized
2025-08-26 00:03:18 | INFO     | services.signal_generator:__init__:110 - Signal generator initialized
2025-08-26 00:03:18 | INFO     | models.ppo_agent:__init__:144 - PPO Trading Agent initialized
2025-08-26 00:03:18 | INFO     | envs.state_features:__init__:41 - State feature extractor initialized
2025-08-26 00:03:18 | INFO     | services.signal_generator:__init__:110 - Signal generator initialized
2025-08-26 00:03:18 | INFO     | __main__:initialize:151 - System initialization completed successfully
2025-08-26 00:03:18 | INFO     | __main__:start_websocket_server:418 - WebSocket server started
2025-08-26 00:03:18 | INFO     | __main__:run_training:215 - Starting training for XAUUSDm
2025-08-26 00:03:19 | INFO     | backend.data_manager:get_historical_data:530 - Retrieved 2912 rows from cache for XAUUSDm
2025-08-26 00:03:19 | INFO     | __main__:_get_or_download_data:445 - Using cached data for XAUUSDm: 2912 samples
2025-08-26 00:03:19 | INFO     | __main__:run_training:235 - Training data prepared: 2912 samples
2025-08-26 00:03:19 | INFO     | envs.state_features:__init__:41 - State feature extractor initialized
2025-08-26 00:03:19 | INFO     | envs.reward_functions:__init__:43 - Reward calculator initialized with type: profit_based
2025-08-26 00:03:19 | INFO     | envs.state_features:extract_features:53 - Extracting features from market data
2025-08-26 00:03:19 | INFO     | envs.state_features:_normalize_features:279 - Feature normalization parameters fitted for 28 features
2025-08-26 00:03:19 | INFO     | envs.state_features:_select_features:311 - Selected 28 features: ['open', 'high', 'low', 'close', 'volume', 'sma_5', 'sma_20', 'sma_50', 'ema_12', 'ema_26', 'rsi_14', 'macd', 'macd_signal', 'bb_upper', 'bb_lower', 'atr_14', 'hour_of_day', 'day_of_week', 'is_weekend', 'hour_sin', 'hour_cos', 'dow_sin', 'dow_cos', 'price_change', 'high_low_ratio', 'volume_ratio', 'volatility', 'price_position']
2025-08-26 00:03:19 | INFO     | envs.state_features:extract_features:69 - Feature extraction complete. Shape: (2329, 28)
2025-08-26 00:03:19 | INFO     | envs.trading_env:_prepare_data:203 - Data prepared: 2280 samples, 28 features
2025-08-26 00:03:19 | INFO     | envs.trading_env:_setup_spaces:231 - Action space: Discrete(3)
2025-08-26 00:03:19 | INFO     | envs.trading_env:_setup_spaces:232 - Observation space: (2805,)
2025-08-26 00:03:19 | INFO     | envs.trading_env:__init__:144 - Trading environment initialized with 2329 data points
2025-08-26 00:03:19 | INFO     | models.ppo_agent:create_model:313 - Creating new PPO model
2025-08-26 00:03:23 | INFO     | models.ppo_agent:create_model:351 - PPO model created successfully
2025-08-26 00:03:23 | INFO     | models.ppo_agent:train:357 - Starting PPO training with 2329 samples
2025-08-26 00:03:23 | INFO     | envs.state_features:__init__:41 - State feature extractor initialized
2025-08-26 00:03:23 | INFO     | envs.reward_functions:__init__:43 - Reward calculator initialized with type: profit_based
2025-08-26 00:03:23 | INFO     | envs.state_features:extract_features:53 - Extracting features from market data
2025-08-26 00:03:23 | INFO     | envs.state_features:_normalize_features:279 - Feature normalization parameters fitted for 28 features
2025-08-26 00:03:23 | INFO     | envs.state_features:_select_features:311 - Selected 28 features: ['open', 'high', 'low', 'close', 'volume', 'sma_5', 'sma_20', 'sma_50', 'ema_12', 'ema_26', 'rsi_14', 'macd', 'macd_signal', 'bb_upper', 'bb_lower', 'atr_14', 'hour_of_day', 'day_of_week', 'is_weekend', 'hour_sin', 'hour_cos', 'dow_sin', 'dow_cos', 'price_change', 'high_low_ratio', 'volume_ratio', 'volatility', 'price_position']
2025-08-26 00:03:23 | INFO     | envs.state_features:extract_features:69 - Feature extraction complete. Shape: (583, 28)
2025-08-26 00:03:23 | INFO     | envs.trading_env:_prepare_data:203 - Data prepared: 534 samples, 28 features
2025-08-26 00:03:23 | INFO     | envs.trading_env:_setup_spaces:231 - Action space: Discrete(3)
2025-08-26 00:03:23 | INFO     | envs.trading_env:_setup_spaces:232 - Observation space: (2805,)
2025-08-26 00:03:23 | INFO     | envs.trading_env:__init__:144 - Trading environment initialized with 583 data points
2025-08-26 00:03:36 | INFO     | models.ppo_agent:_on_rollout_end:101 - New best model saved with portfolio value: 14294.38
2025-08-26 00:04:02 | INFO     | models.ppo_agent:_on_rollout_end:101 - New best model saved with portfolio value: 41228.73
2025-08-26 00:04:27 | INFO     | models.ppo_agent:_on_rollout_end:101 - New best model saved with portfolio value: 183862.88
2025-08-26 00:04:53 | INFO     | models.ppo_agent:_on_rollout_end:101 - New best model saved with portfolio value: 213716.53
2025-08-26 00:05:20 | INFO     | models.ppo_agent:_on_rollout_end:101 - New best model saved with portfolio value: 256950.20
2025-08-26 00:05:31 | INFO     | models.ppo_agent:train:395 - Saved VecNormalize stats to ./models/saved_models\vecnormalize.pkl
2025-08-26 00:05:31 | INFO     | models.ppo_agent:train:417 - Training completed. Model saved to ./models/saved_models/ppo_final_8a1db02f-9b99-4399-8944-d6dbe0cb6051.zip
2025-08-26 00:05:31 | INFO     | services.websocket_server:initialize:108 - Redis connection established
2025-08-26 00:05:31 | INFO     | services.websocket_server:start_server:438 - WebSocket server started on 0.0.0.0:8080
2025-08-26 00:05:32 | INFO     | backend.data_manager:save_training_session:296 - Training session 8a1db02f-9b99-4399-8944-d6dbe0cb6051 saved successfully
2025-08-26 00:05:32 | INFO     | __main__:run_training:277 - Training completed for XAUUSDm: {'success': True, 'model_path': './models/saved_models/ppo_final_8a1db02f-9b99-4399-8944-d6dbe0cb6051.zip', 'total_timesteps': 10000, 'best_model_path': 'C:\\Users\\ikchr\\AppData\\Local\\Temp\\SB3-2025-08-26-00-03-23-230344\\best_model', 'final_performance': {'mean_reward': np.float64(256950.19670556078), 'total_episodes': 0}}
2025-08-26 00:05:32 | INFO     | __main__:shutdown:485 - Shutting down PPO Trading System...
2025-08-26 00:05:32 | INFO     | services.mt5_client:stop_streaming:312 - Stopped market data streaming
2025-08-26 00:05:32 | INFO     | services.mt5_client:disconnect:166 - Disconnected from MT5
2025-08-26 00:05:32 | INFO     | backend.data_manager:close:265 - Database connections closed
2025-08-26 00:05:32 | INFO     | __main__:shutdown:502 - System shutdown completed
2025-08-26 00:07:26 | INFO     | __main__:__init__:83 - PPO Trading System initialized
2025-08-26 00:07:26 | INFO     | __main__:initialize:118 - Initializing PPO Trading System...
2025-08-26 00:07:30 | INFO     | backend.data_manager:_connect_postgres:93 - Connected to PostgreSQL database
2025-08-26 00:07:31 | INFO     | backend.data_manager:_connect_redis:116 - Connected to Redis cache
2025-08-26 00:07:34 | INFO     | backend.data_manager:_create_tables:247 - Database tables created/verified successfully
2025-08-26 00:07:34 | INFO     | backend.data_manager:initialize:72 - Data manager initialization completed
2025-08-26 00:07:36 | INFO     | services.websocket_server:initialize:108 - Redis connection established
2025-08-26 00:07:36 | INFO     | models.ppo_agent:__init__:144 - PPO Trading Agent initialized
2025-08-26 00:07:36 | INFO     | services.mt5_client:__init__:113 - MT5 Client initialized
2025-08-26 00:07:36 | INFO     | models.ppo_agent:__init__:144 - PPO Trading Agent initialized
2025-08-26 00:07:36 | INFO     | envs.state_features:__init__:41 - State feature extractor initialized
2025-08-26 00:07:36 | INFO     | services.signal_generator:__init__:110 - Signal generator initialized
2025-08-26 00:07:36 | INFO     | models.ppo_agent:__init__:144 - PPO Trading Agent initialized
2025-08-26 00:07:36 | INFO     | envs.state_features:__init__:41 - State feature extractor initialized
2025-08-26 00:07:36 | INFO     | services.signal_generator:__init__:110 - Signal generator initialized
2025-08-26 00:07:36 | INFO     | __main__:initialize:151 - System initialization completed successfully
2025-08-26 00:07:36 | INFO     | __main__:start_websocket_server:418 - WebSocket server started
2025-08-26 00:07:36 | INFO     | __main__:run_backtest:311 - Starting backtest for XAUUSDm with model models/saved_models/ppo_final_8a1db02f-9b99-4399-8944-d6dbe0cb6051.zip
2025-08-26 00:07:41 | INFO     | services.websocket_server:initialize:108 - Redis connection established
2025-08-26 00:07:41 | INFO     | services.websocket_server:start_server:438 - WebSocket server started on 0.0.0.0:8080
2025-08-26 00:07:43 | INFO     | backend.data_manager:get_historical_data:530 - Retrieved 2912 rows from cache for XAUUSDm
2025-08-26 00:07:43 | INFO     | __main__:_get_or_download_data:445 - Using cached data for XAUUSDm: 2912 samples
2025-08-26 00:07:43 | INFO     | envs.state_features:__init__:41 - State feature extractor initialized
2025-08-26 00:07:43 | INFO     | envs.reward_functions:__init__:43 - Reward calculator initialized with type: profit_based
2025-08-26 00:07:43 | INFO     | envs.state_features:extract_features:53 - Extracting features from market data
2025-08-26 00:07:43 | INFO     | envs.state_features:_normalize_features:279 - Feature normalization parameters fitted for 28 features
2025-08-26 00:07:43 | INFO     | envs.state_features:_select_features:311 - Selected 28 features: ['open', 'high', 'low', 'close', 'volume', 'sma_5', 'sma_20', 'sma_50', 'ema_12', 'ema_26', 'rsi_14', 'macd', 'macd_signal', 'bb_upper', 'bb_lower', 'atr_14', 'hour_of_day', 'day_of_week', 'is_weekend', 'hour_sin', 'hour_cos', 'dow_sin', 'dow_cos', 'price_change', 'high_low_ratio', 'volume_ratio', 'volatility', 'price_position']
2025-08-26 00:07:43 | INFO     | envs.state_features:extract_features:69 - Feature extraction complete. Shape: (2912, 28)
2025-08-26 00:07:43 | INFO     | envs.trading_env:_prepare_data:203 - Data prepared: 2863 samples, 28 features
2025-08-26 00:07:43 | INFO     | envs.trading_env:_setup_spaces:231 - Action space: Discrete(3)
2025-08-26 00:07:43 | INFO     | envs.trading_env:_setup_spaces:232 - Observation space: (2805,)
2025-08-26 00:07:43 | INFO     | envs.trading_env:__init__:144 - Trading environment initialized with 2912 data points
2025-08-26 00:07:43 | INFO     | models.ppo_agent:load_model:554 - Loaded VecNormalize stats from models/saved_models\vecnormalize.pkl
2025-08-26 00:07:46 | INFO     | models.ppo_agent:load_model:565 - Model loaded from models/saved_models/ppo_final_8a1db02f-9b99-4399-8944-d6dbe0cb6051.zip
2025-08-26 00:07:46 | ERROR    | __main__:run_backtest:347 - Backtest failed: Failed to load model from models/saved_models/ppo_final_8a1db02f-9b99-4399-8944-d6dbe0cb6051.zip
2025-08-26 00:07:46 | INFO     | __main__:shutdown:485 - Shutting down PPO Trading System...
2025-08-26 00:07:46 | INFO     | services.mt5_client:stop_streaming:312 - Stopped market data streaming
2025-08-26 00:07:46 | INFO     | services.mt5_client:disconnect:166 - Disconnected from MT5
2025-08-26 00:07:47 | INFO     | backend.data_manager:close:265 - Database connections closed
2025-08-26 00:07:47 | INFO     | __main__:shutdown:502 - System shutdown completed
2025-08-26 01:10:52 | INFO     | __main__:__init__:83 - PPO Trading System initialized
2025-08-26 01:10:52 | INFO     | __main__:initialize:118 - Initializing PPO Trading System...
2025-08-26 01:10:54 | INFO     | backend.data_manager:_connect_postgres:93 - Connected to PostgreSQL database
2025-08-26 01:10:56 | INFO     | backend.data_manager:_connect_redis:116 - Connected to Redis cache
2025-08-26 01:10:59 | INFO     | backend.data_manager:_create_tables:247 - Database tables created/verified successfully
2025-08-26 01:10:59 | INFO     | backend.data_manager:initialize:72 - Data manager initialization completed
2025-08-26 01:11:00 | INFO     | services.websocket_server:initialize:108 - Redis connection established
2025-08-26 01:11:00 | INFO     | models.ppo_agent:__init__:144 - PPO Trading Agent initialized
2025-08-26 01:11:00 | INFO     | services.mt5_client:__init__:113 - MT5 Client initialized
2025-08-26 01:11:00 | INFO     | models.ppo_agent:__init__:144 - PPO Trading Agent initialized
2025-08-26 01:11:00 | INFO     | envs.state_features:__init__:41 - State feature extractor initialized
2025-08-26 01:11:00 | INFO     | services.signal_generator:__init__:110 - Signal generator initialized
2025-08-26 01:11:00 | INFO     | models.ppo_agent:__init__:144 - PPO Trading Agent initialized
2025-08-26 01:11:00 | INFO     | envs.state_features:__init__:41 - State feature extractor initialized
2025-08-26 01:11:00 | INFO     | services.signal_generator:__init__:110 - Signal generator initialized
2025-08-26 01:11:00 | INFO     | __main__:initialize:151 - System initialization completed successfully
2025-08-26 01:11:00 | INFO     | __main__:start_websocket_server:418 - WebSocket server started
2025-08-26 01:11:00 | INFO     | __main__:run_training:215 - Starting training for XAUUSDm
2025-08-26 01:11:00 | WARNING  | backend.data_manager:get_historical_data:538 - No cached data found for XAUUSDm:H1
2025-08-26 01:11:01 | INFO     | services.mt5_client:connect:150 - Connected to MT5: Account 210888620, Balance: 99.6, Server: Exness-MT5Trial9
2025-08-26 01:11:01 | INFO     | services.mt5_client:get_historical_data:231 - Retrieved 11800 bars for XAUUSDm (H1)
2025-08-26 01:11:02 | INFO     | services.websocket_server:initialize:108 - Redis connection established
2025-08-26 01:11:02 | INFO     | services.websocket_server:start_server:438 - WebSocket server started on 0.0.0.0:8080
2025-08-26 01:11:03 | INFO     | backend.data_manager:save_historical_data:500 - Cached historical data for XAUUSDm (11800 rows)
2025-08-26 01:11:03 | INFO     | __main__:_get_or_download_data:464 - Downloaded and cached data for XAUUSDm: 11800 samples
2025-08-26 01:11:03 | INFO     | __main__:run_training:235 - Training data prepared: 11800 samples
2025-08-26 01:11:03 | INFO     | envs.state_features:__init__:41 - State feature extractor initialized
2025-08-26 01:11:03 | INFO     | envs.reward_functions:__init__:43 - Reward calculator initialized with type: profit_based
2025-08-26 01:11:03 | INFO     | envs.state_features:extract_features:53 - Extracting features from market data
2025-08-26 01:11:03 | INFO     | envs.state_features:_normalize_features:279 - Feature normalization parameters fitted for 28 features
2025-08-26 01:11:03 | INFO     | envs.state_features:_select_features:311 - Selected 28 features: ['open', 'high', 'low', 'close', 'volume', 'sma_5', 'sma_20', 'sma_50', 'ema_12', 'ema_26', 'rsi_14', 'macd', 'macd_signal', 'bb_upper', 'bb_lower', 'atr_14', 'hour_of_day', 'day_of_week', 'is_weekend', 'hour_sin', 'hour_cos', 'dow_sin', 'dow_cos', 'price_change', 'high_low_ratio', 'volume_ratio', 'volatility', 'price_position']
2025-08-26 01:11:04 | INFO     | envs.state_features:extract_features:69 - Feature extraction complete. Shape: (11800, 28)
2025-08-26 01:11:04 | INFO     | envs.trading_env:_prepare_data:203 - Data prepared: 11751 samples, 28 features
2025-08-26 01:11:04 | INFO     | envs.trading_env:_setup_spaces:231 - Action space: Discrete(3)
2025-08-26 01:11:04 | INFO     | envs.trading_env:_setup_spaces:232 - Observation space: (2805,)
2025-08-26 01:11:04 | INFO     | envs.trading_env:__init__:144 - Trading environment initialized with 11800 data points
2025-08-26 01:11:04 | INFO     | models.ppo_agent:create_model:313 - Creating new PPO model
2025-08-26 01:11:08 | INFO     | models.ppo_agent:create_model:351 - PPO model created successfully
2025-08-26 01:11:08 | INFO     | models.ppo_agent:train:357 - Starting PPO training with 11800 samples
2025-08-26 01:11:27 | INFO     | models.ppo_agent:_on_rollout_end:101 - New best model saved with portfolio value: 3787190991.40
2025-08-26 01:11:57 | INFO     | models.ppo_agent:_on_rollout_end:101 - New best model saved with portfolio value: 1417160064193453.00
2025-08-26 01:12:30 | INFO     | models.ppo_agent:_on_rollout_end:101 - New best model saved with portfolio value: 273358124253722050560.00
2025-08-26 01:13:46 | INFO     | models.ppo_agent:train:395 - Saved VecNormalize stats to ./models/saved_models\vecnormalize.pkl
2025-08-26 01:13:46 | INFO     | models.ppo_agent:train:417 - Training completed. Model saved to ./models/saved_models/ppo_final_1319897b-d671-4ef5-a5fc-367a650c4035.zip
2025-08-26 01:13:47 | INFO     | backend.data_manager:save_training_session:296 - Training session 1319897b-d671-4ef5-a5fc-367a650c4035 saved successfully
2025-08-26 01:13:47 | INFO     | __main__:run_training:277 - Training completed for XAUUSDm: {'success': True, 'model_path': './models/saved_models/ppo_final_1319897b-d671-4ef5-a5fc-367a650c4035.zip', 'total_timesteps': 10000, 'best_model_path': 'C:\\Users\\ikchr\\AppData\\Local\\Temp\\SB3-2025-08-26-01-11-08-283638\\best_model', 'final_performance': {'mean_reward': np.float64(2.7335812425372205e+20), 'total_episodes': 0}}
2025-08-26 01:13:47 | INFO     | __main__:shutdown:485 - Shutting down PPO Trading System...
2025-08-26 01:13:47 | INFO     | services.mt5_client:stop_streaming:312 - Stopped market data streaming
2025-08-26 01:13:47 | INFO     | services.mt5_client:disconnect:166 - Disconnected from MT5
2025-08-26 01:13:47 | INFO     | backend.data_manager:close:265 - Database connections closed
2025-08-26 01:13:47 | INFO     | __main__:shutdown:502 - System shutdown completed
